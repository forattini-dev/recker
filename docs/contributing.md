# Contributing to Recker

Thank you for considering a contribution! This project is designed to be easy to work on and easy to publish to npm.

## Quick start

- Requirements: **Node.js 18+** and **npm** (the repo ships a `package-lock.json`). `pnpm`/`yarn` are fine locally, but please commit lockfile changes generated by npm.
- Setup:
  ```bash
  git clone https://github.com/forattini-dev/recker.git
  cd recker
  npm install
  ```

### Useful scripts

| Command | What it does |
|---------|--------------|
| `npm test` | Run the Vitest suite once |
| `npm run test:coverage` | Vitest with coverage |
| `npm run build` | TypeScript build to `dist/` |
| `npm run bench` | Mitata benchmark (fast smoke) |
| `npm run bench:all` | Full benchmark suite |

## Workflow

1. Create a branch (`feat/http3-metrics`, `fix/timeout-handling`, etc.).
2. Make changes with strict TypeScript in mind—prefer pure helpers and keep modules focused.
3. Add/adjust tests when behavior changes.
4. Update documentation snippets if APIs move or options change.
5. Run `npm test` and, if relevant, `npm run bench` to spot regressions.

## Style & expectations

- Favor small, composable functions; avoid hidden globals.
- Handle `AbortSignal`/timeouts carefully—propagate reasons when aborting.
- Log/debug paths should have minimal overhead when disabled.
- Keep comments terse and intent-focused.

## Publishing to npm (maintainers)

The package ships only `dist/`, `README`, and `LICENSE`, with `exports` and `types` configured.

1. Ensure `npm test` and `npm run build` pass locally (both run automatically via `prepublishOnly`).
2. Bump version with `npm version patch|minor|major`.
3. Publish: `npm publish --access public`.
4. Push tags: `git push --follow-tags`.

## Pull request checklist

- [ ] Tests cover the change (or rationale provided).
- [ ] Docs/examples updated where relevant.
- [ ] No lint/type errors (`npm run build` succeeds).
- [ ] Benchmarks checked if performance-sensitive code changed.
